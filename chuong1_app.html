<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Trắc Nghiệm Mạng Máy Tính Chương 1</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    .quiz-option.selected {
      background-color: #3b82f6;
      /* bg-blue-500 */
      color: white;
      border-color: #2563eb;
      /* border-blue-700 */
    }

    .quiz-option:hover {
      background-color: #dbeafe;
      /* bg-blue-100 */
    }
  </style>
</head>

<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

  <div id="quiz-container" class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl w-full max-w-3xl mx-auto">
    <div id="quiz-header" class="mb-6 border-b pb-4">
      <h1 class="text-2xl sm:text-3xl font-bold text-slate-800">Quiz Mạng Máy Tính - Chương 1</h1>
      <p id="progress-text" class="text-sm text-slate-500 mt-2">Câu 1 trên 66</p>
    </div>

    <div id="question-area">
      <h2 id="question-text" class="text-lg font-semibold text-slate-700 mb-5"></h2>
      <div id="options-container" class="space-y-3">
        <!-- Options will be dynamically inserted here -->
      </div>
    </div>

    <div id="navigation-buttons" class="mt-8 flex justify-between items-center">
      <button id="prev-btn"
        class="bg-slate-300 hover:bg-slate-400 text-slate-800 font-bold py-2 px-6 rounded-lg transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed">Câu
        Trước</button>
      <button id="next-btn"
        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-300">Câu
        Tiếp</button>
      <button id="submit-btn"
        class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-300 hidden">Nộp
        Bài</button>
    </div>
  </div>

  <div id="result-container" class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-3xl mx-auto hidden">
    <h1 class="text-3xl font-bold text-slate-800 text-center">Kết Quả Bài Làm</h1>
    <div id="score-text" class="text-center text-2xl font-semibold my-6 bg-blue-100 text-blue-800 p-4 rounded-lg"></div>
    <div id="review-area" class="mt-6 space-y-4 max-h-[60vh] overflow-y-auto pr-2">
      <!-- Review questions will be here -->
    </div>
    <div class="text-center mt-8">
      <button id="restart-btn"
        class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg transition-colors duration-300">Làm
        Lại</button>
    </div>
  </div>


  <script>
    const quizData = [
      // Phần I: Câu hỏi trắc nghiệm (Chọn 1 đáp án đúng nhất)
      {
        question: "Mạng máy tính là mạng Internet?",
        options: ["Đúng", "Sai"],
        answer: "Sai",
        type: "single"
      },
      {
        question: "Thuật ngữ MAN là viết tắt của cụm từ nào?",
        options: ["Metropolitan Area Network", "Metropolitan Area Networking"],
        answer: "Metropolitan Area Network",
        type: "single"
      },
      {
        question: "LAN là thuật ngữ dùng để chỉ các máy tính kết nối với nhau trong phạm vi hẹp (dạng như trong văn phòng hay toà nhà).",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Mạng Internet được hình thành từ sự kết nối của rất nhiều mạng, nhiều loại mạng khác nhau trên toàn thế giới.",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Các dạng mạng máy tính có cấu trúc liên kết (dạng như Bus, Star, Ring,...) được phân loại dựa trên hình dạng kết nối các thiết bị?",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Hub là một thiết bị đầu cuối.",
        options: ["Đúng", "Sai"],
        answer: "Sai",
        type: "single"
      },
      {
        question: "Thuật ngữ LAN (mạng cục bộ) là viết tắt của cụm từ nào?",
        options: ["Local Access Network", "Local Access Networking", "Local Area Network", "Local Area Networking"],
        answer: "Local Area Network",
        type: "single"
      },
      {
        question: "Sự sắp xếp hình học của các thiết bị trên mạng được gọi là:",
        options: ["Topology", "Protocols", "Network", "Medium"],
        answer: "Topology",
        type: "single"
      },
      {
        question: "Thuật ngữ IANA là viết tắt của?",
        options: ["Internet Assigned Numbers Authority", "Internal Assigned Numbers Authority",
          "Internet Associative Numbers Authoritative", "Internal Associative Numbers Authority"
        ],
        answer: "Internet Assigned Numbers Authority",
        type: "single"
      },
      {
        question: "Node là một tên khác của:",
        options: ["Link", "Device", "Medium", "Mode"],
        answer: "Device",
        type: "single"
      },
      {
        question: "Tên của mạng đầu tiên (tiền thân của Internet) là gì?",
        options: ["ASAPNET", "ARPANET", "CNNET", "NSFNET"],
        answer: "ARPANET",
        type: "single"
      },
      {
        question: "ISP là chữ viết tắt của?",
        options: ["International Service Provider", "International System Provider", "Internet Service Provider",
          "Internetwork System Provider"
        ],
        answer: "Internet Service Provider",
        type: "single"
      },
      {
        question: "Tổ chức nào sau đây KHÔNG phải là nhà cung cấp dịch vụ truy cập Internet tại Việt Nam?",
        options: ["Viettel", "FPT", "VNPT", "Vodaphone"],
        answer: "Vodaphone",
        type: "single"
      },
      {
        question: "Hai máy tính khác nhau có thể truyền thông với nhau nếu (Chọn phát biểu phù hợp nhất):",
        options: ["Chúng cài đặt cùng hệ điều hành mạng", "Chúng cùng tuân thủ theo một mô hình",
          "Chúng cùng dùng một bộ giao thức", "Chúng có phần cứng giống nhau"
        ],
        answer: "Chúng cùng dùng một bộ giao thức",
        type: "single"
      },
      {
        question: "Các kiểu mạng LAN, MAN, WAN, GAN được phân biệt với nhau bởi tiêu chí nào dưới đây?",
        options: ["Khoảng cách địa lý", "Giao thức truyền thông", "Thiết bị mạng", "Đường truyền mạng"],
        answer: "Khoảng cách địa lý",
        type: "single"
      },
      {
        question: "ISO là từ viết tắt của International Standard Organization?",
        options: ["Đúng", "Sai"],
        answer: "Sai",
        type: "single"
      },
      {
        question: "Trong mô hình OSI, tầng Network có thể thông tin trực tiếp với các tầng Datalink và Transport trong cùng một thiết bị.",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Mô hình tham chiếu OSI được định nghĩa trong ISO/IEC 7498-1?",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Trong hệ sinh thái Internet, VNNIC là NIR-National Internet Registry của Việt Nam?",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Mô hình OSI có mấy tầng?",
        options: ["4 tầng", "5 tầng", "6 tầng", "7 tầng"],
        answer: "7 tầng",
        type: "single"
      },
      {
        question: "Thuật ngữ ISO là từ viết tắt của:",
        options: ["International Organize for Standardization", "International Organizations for Standardization",
          "International Organizations for Standard", "International Organized for Standardization"
        ],
        answer: "International Organizations for Standardization",
        type: "single"
      },
      {
        question: "Mô hình OSI được công nhận vào năm nào?",
        options: ["1980", "1982", "1984", "1986"],
        answer: "1984",
        type: "single"
      },
      {
        question: "Tầng nào trong mô hình OSI làm việc với các tín hiệu điện?",
        options: ["Data Link", "Network", "Physical", "Session"],
        answer: "Physical",
        type: "single"
      },
      {
        question: "Thứ tự (từ trên xuống) của các tầng trong mô hình OSI là?",
        options: ["Application, Presentation, Session, Transport, Data Link, Network, Physical",
          "Application, Presentation, Session, Network, Transport, Data Link, Physical",
          "Application, Presentation, Session, Transport, Network, Data Link, Physical",
          "Application, Presentation, Transport, Session, Data Link, Network, Physical"
        ],
        answer: "Application, Presentation, Session, Transport, Network, Data Link, Physical",
        type: "single"
      },
      {
        question: "Chức năng của thiết bị Hub thông thường nằm ở tầng nào trong mô hình OSI?",
        options: ["Tầng 1", "Tầng 2", "Tầng 3", "Tầng 4"],
        answer: "Tầng 1",
        type: "single"
      },
      {
        question: "Chức năng của thiết bị Switch thông thường nằm ở tầng nào trong mô hình OSI?",
        options: ["Tầng 1", "Tầng 2", "Tầng 3", "Tầng 4"],
        answer: "Tầng 2",
        type: "single"
      },
      {
        question: "Trong mô hình TCP/IP, nó chia hoạt động truyền thông mạng thành 7 tầng.",
        options: ["Đúng", "Sai"],
        answer: "Sai",
        type: "single"
      },
      {
        question: "Trong mô hình TCP/IP, Data là đơn vị dữ liệu giao thức tầng Ứng dụng.",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Quá trình mở gói trong mô hình TCP/IP là quá trình loại bỏ thông tin bổ sung khi nó chuyển lên lớp trên.",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Thứ tự (từ trên xuống) của các tầng trong mô hình TCP/IP là?",
        options: ["Application - Internet - Transport - Network Access",
          "Internet - Network Access - Transport - Application",
          "Transport - Internet - Network Access - Application",
          "Application - Transport - Internet - Network Access"
        ],
        answer: "Application - Transport - Internet - Network Access",
        type: "single"
      },
      {
        question: "Mô hình TCP/IP tương đương có mấy lớp?",
        options: ["4", "5", "6", "7"],
        answer: "5",
        type: "single"
      },
      {
        question: "Thứ tự (từ trên xuống) của các lớp trong mô hình TCP/IP là?",
        options: ["Lớp ứng dụng - Lớp vận chuyển - Lớp liên kết dữ liệu - Lớp Network - Lớp vật lý",
          "Lớp ứng dụng - Lớp Network - Lớp vận chuyển - Lớp liên kết dữ liệu - Lớp vật lý",
          "Lớp ứng dụng - Lớp vận chuyển - Lớp Network - Lớp liên kết dữ liệu - Lớp vật lý",
          "Lớp ứng dụng - Lớp liên kết dữ liệu - Lớp Network - Lớp vận chuyển - Lớp vật lý"
        ],
        answer: "Lớp ứng dụng - Lớp vận chuyển - Lớp Network - Lớp liên kết dữ liệu - Lớp vật lý",
        type: "single"
      },
      {
        question: "Thứ tự đúng của các đơn vị dữ liệu trong mô hình TCP/IP tương đương là?",
        options: ["Data, Frame, Segment, Packet, Bit", "Data, Segment, Frame, Packet, Bit",
          "Data, Packet, Frame, Segment, Bit", "Data, Segment, Packet, Frame, Bit"
        ],
        answer: "Data, Segment, Packet, Frame, Bit",
        type: "single"
      },
      {
        question: "Giao thức nào dưới đây nằm ở tầng Internet trong mô hình TCP/IP?",
        options: ["SLAAC", "TFTP", "OSPF", "UDP"],
        answer: "OSPF",
        type: "single"
      },
      {
        question: "Giao thức nào dưới đây dùng cho ứng dụng, dịch vụ Web?",
        options: ["DNS", "DHCP", "SFTP", "REST"],
        answer: "REST",
        type: "single"
      },
      {
        question: "Đơn vị dữ liệu giao thức (PDU) của tầng Giao vận là:",
        options: ["Data", "Bits", "Segment", "Packet"],
        answer: "Segment",
        type: "single"
      },
      {
        question: "Giao thức nào dưới đây dùng cho ứng dụng Email?",
        options: ["POP3", "Frame Relay", "ARP", "ATM"],
        answer: "POP3",
        type: "single"
      },
      {
        question: "Chuyển đổi khung thành tín hiệu (quang, điện hoặc điện từ) dựa trên môi trường truyền là một trong những chức năng của tầng Vật lý?",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Coaxial là một loại cáp dùng trong truyền thông mạng máy tính.",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Cáp đồng trục trong tầng vật lý của mô hình truyền thông có hai loại.",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Cáp xoắn có vỏ bọc chống nhiễu là UTP?",
        options: ["Đúng", "Sai"],
        answer: "Sai",
        type: "single"
      },
      {
        question: "https://i-speed.vn là một link truy cập công cụ đo kiểm chất lượng mạng?",
        options: ["Đúng", "Sai"],
        answer: "Đúng",
        type: "single"
      },
      {
        question: "Thông lượng (throughput) là:",
        options: ["Tốc độ truyền dữ liệu trên đường truyền",
          "Độ đo phạm vi tần số mà đường truyền có thể đáp ứng được",
          "Độ đo sự yếu đi của tín hiệu trên đường truyền",
          "Độ đo sự ảnh hưởng của tiếng ồn điện từ bên ngoài đến tín hiệu đường truyền"
        ],
        answer: "Tốc độ truyền dữ liệu trên đường truyền",
        type: "single"
      },
      {
        question: "Phương thức giao tiếp trong đó việc truyền dữ liệu diễn ra theo cả hai hướng nhưng tại một thời điểm chỉ có một hướng được truyền dữ liệu, gọi là:",
        options: ["Simplex", "Four-wire circuit", "Half-duplex", "Full duplex"],
        answer: "Half-duplex",
        type: "single"
      },
      {
        question: "Tốc độ truyền dữ liệu tối đa của kết nối Gigabit Ethernet là bao nhiêu?",
        options: ["10 Mbps", "100 Mbps", "1 Gbps", "10 Gbps"],
        answer: "1 Gbps",
        type: "single"
      },
      {
        question: "Các loại cáp nào dưới đây là cáp đồng trục dùng ở tầng vật lý trong mô hình truyền thông?",
        options: ["Bignet và Smallnet", "Thicknet và Thinnet", "Bignet và Thicknet", "Thinnet và Smallnet"],
        answer: "Thicknet và Thinnet",
        type: "single"
      },
      {
        question: "Loại cáp nào dưới đây là cáp quang dùng ở tầng vật lý trong mô hình truyền thông?",
        options: ["Multi-Mode", "Private-Mode", "Privileged-Mode", "Public-Mode"],
        answer: "Multi-Mode",
        type: "single"
      },
      {
        question: "Thuật ngữ IEEE là từ viết tắt của:",
        options: ["Institute for Electrical and Electronic Engineers",
          "Institute for Electrical and Electronic Engineer", "Institute for Electrical and Electronic Engineering",
          "Institute for Electrical and Electronic Engineeres"
        ],
        answer: "Institute for Electrical and Electronic Engineers",
        type: "single"
      },
      {
        question: "Cáp xoắn có vỏ bọc chống nhiễu (STP) là:",
        options: ["Shield Twisted Pair", "Shielded Twist Pair", "Shield Twist Pair", "Shielded Twisted Pair"],
        answer: "Shielded Twisted Pair",
        type: "single"
      },
      {
        question: "Chuẩn nào dưới đây KHÔNG phải là một loại chuẩn cáp mạng?",
        options: ["Category 5", "Category 6", "Category 7", "Category 11"],
        answer: "Category 11",
        type: "single"
      },
      {
        question: "Loại kết nối nào dưới đây là kết nối không dây tầm xa?",
        options: ["ZigBee", "Satellite", "RFID", "WiMax"],
        answer: "Satellite",
        type: "single"
      },

      // Phần II: Câu hỏi trắc nghiệm (Chọn 3 đáp án)
      {
        question: "Chọn các thành phần bên dưới là các thành phần chính của hệ thống mạng máy tính? (Chọn 3 đáp án)",
        options: ["Thiết bị đầu cuối", "Thiết bị mạng", "Kết nối", "Thiết bị làm mát"],
        answer: ["Thiết bị đầu cuối", "Thiết bị mạng", "Kết nối"],
        type: "multiple"
      },
      {
        question: "Kiến trúc mô hình phân cấp 3 lớp truyền thống gồm có lớp nào? (Chọn 3 đáp án)",
        options: ["Core", "Boder", "Aggregation", "Access"],
        answer: ["Core", "Aggregation", "Access"],
        type: "multiple"
      },
      {
        question: "Kết nối nào dưới đây là loại có dây – Wired? (Chọn 3 đáp án)",
        options: ["Ethernet", "Fiber Optic", "Copper Cable", "Satellite"],
        answer: ["Ethernet", "Fiber Optic", "Copper Cable"],
        type: "multiple"
      },
      {
        question: "Những loại nào dưới đây là topology của một mạng LAN? (Chọn 3 đáp án)",
        options: ["Square", "Bus", "Ring", "Star"],
        answer: ["Bus", "Ring", "Star"],
        type: "multiple"
      },
      {
        question: "Các chức năng nào dưới đây nằm trong Hệ sinh thái Internet? (Chọn 3 đáp án)",
        options: ["Phát triển tiêu chuẩn mở", "Xây dựng hệ thống năng lực toàn cầu", "Đặt tên và địa chỉ",
          "Dịch vụ và hoạt động chia sẻ toàn cầu"
        ],
        answer: ["Phát triển tiêu chuẩn mở", "Đặt tên và địa chỉ", "Dịch vụ và hoạt động chia sẻ toàn cầu"],
        type: "multiple"
      },
      {
        question: "Các tầng nào dưới đây nằm trong mô hình tham chiếu OSI? (Chọn 3 đáp án)",
        options: ["Tầng Data Link", "Tầng Application", "Tầng Internet", "Tầng Session"],
        answer: ["Tầng Data Link", "Tầng Application", "Tầng Session"],
        type: "multiple"
      },
      {
        question: "Tầng vận chuyển trong mô hình OSI thực hiện chức năng nào dưới đây? (Chọn 3 đáp án)",
        options: ["Kết nối End-to-End", "Kiểm soát lỗi", "Đồng bộ hoá", "Kiểm soát luồng dữ liệu"],
        answer: ["Kết nối End-to-End", "Kiểm soát lỗi", "Kiểm soát luồng dữ liệu"],
        type: "multiple"
      },
      {
        question: "Các tầng nào dưới đây trong mô hình OSI KHÔNG thực hiện việc tạo khung? (Chọn 3 đáp án)",
        options: ["Tầng Ứng dụng", "Tầng Phiên", "Tầng Mạng", "Tầng Liên kết"],
        answer: ["Tầng Ứng dụng", "Tầng Phiên", "Tầng Mạng"],
        type: "multiple"
      },
      {
        question: "Để đảm bảo dữ liệu được gửi tới đúng đích, việc xác định địa chỉ dữ liệu được thực hiện ở ba lớp nào dưới đây trong mô hình TCP/IP? (Chọn 3 đáp án)",
        options: ["Lớp liên kết dữ liệu", "Lớp Internet", "Lớp Giao vận", "Lớp Ứng dụng"],
        answer: ["Lớp liên kết dữ liệu", "Lớp Internet", "Lớp Giao vận"],
        type: "multiple"
      },
      {
        question: "Các tầng nào dưới đây nằm trong mô hình TCP/IP? (Chọn 3 đáp án)",
        options: ["Tầng Internet", "Tầng Network Access", "Tầng Datalink", "Tầng Application"],
        answer: ["Tầng Internet", "Tầng Network Access", "Tầng Application"],
        type: "multiple"
      },
      {
        question: "Giao thức nào dưới đây nằm ở tầng Ứng dụng trong mô hình TCP/IP? (Chọn 3 đáp án)",
        options: ["RIP", "HTTP", "TFTP", "NAT"],
        answer: ["RIP", "HTTP", "TFTP"],
        type: "multiple"
      },
      {
        question: "Giao thức nào dưới đây KHÔNG nằm ở tầng Vận chuyển trong mô hình TCP/IP? (Chọn 3 đáp án)",
        options: ["DNS", "DHCP", "SMTP", "TCP"],
        answer: ["DNS", "DHCP", "SMTP"],
        type: "multiple"
      },
      {
        question: "Tầng Vật Lý (Physical Layer) làm nhiệm vụ nào dưới đây? (Chọn 3 đáp án)",
        options: ["Truyền luồng bit qua môi trường vật lý.",
          "Tiêu chuẩn hoá các chức năng tầng vật lý như volt, giao diện cáp.",
          "Chỉ truyền đi các tín hiệu điện từ qua các dây cáp mạng.",
          "Việc truyền dữ liệu được thực hiện bởi hệ thống có dây hoặc không dây."
        ],
        answer: ["Truyền luồng bit qua môi trường vật lý.",
          "Tiêu chuẩn hoá các chức năng tầng vật lý như volt, giao diện cáp.",
          "Việc truyền dữ liệu được thực hiện bởi hệ thống có dây hoặc không dây."
        ],
        type: "multiple"
      },
      {
        question: "Loại kết nối nào dưới đây là kết nối không dây tầm ngắn? (Chọn 3 đáp án)",
        options: ["RFID", "Wifi", "Bluetooth", "ZigBee"],
        answer: ["RFID", "Bluetooth", "ZigBee"],
        type: "multiple"
      },
      {
        question: "Các yếu tố nào dưới đây ảnh hưởng tới tốc độ truyền luồng bits? (Chọn 3 đáp án)",
        options: ["Mã hóa", "Suy hao", "Băng thông", "Khung"],
        answer: ["Mã hóa", "Suy hao", "Băng thông"],
        type: "multiple"
      }
    ];

    let currentQuestionIndex = 0;
    let userAnswers = new Array(quizData.length).fill(null);

    const quizContainer = document.getElementById('quiz-container');
    const resultContainer = document.getElementById('result-container');
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const submitBtn = document.getElementById('submit-btn');
    const restartBtn = document.getElementById('restart-btn');
    const progressText = document.getElementById('progress-text');

    function loadQuestion() {
      const currentQuestion = quizData[currentQuestionIndex];
      questionText.textContent = `Câu ${currentQuestionIndex + 1}: ${currentQuestion.question}`;
      optionsContainer.innerHTML = '';

      const inputType = currentQuestion.type === 'single' ? 'radio' : 'checkbox';

      currentQuestion.options.forEach((option, index) => {
        const optionId = `q${currentQuestionIndex}-option${index}`;
        const optionWrapper = document.createElement('div');
        optionWrapper.classList.add('quiz-option', 'p-4', 'border', 'rounded-lg', 'cursor-pointer',
          'transition-colors', 'duration-200');

        const input = document.createElement('input');
        input.type = inputType;
        input.id = optionId;
        input.name = `q${currentQuestionIndex}`;
        input.value = option;
        input.className = "hidden";

        const label = document.createElement('label');
        label.htmlFor = optionId;
        label.textContent = option;
        label.className = "block w-full cursor-pointer";

        optionWrapper.appendChild(input);
        optionWrapper.appendChild(label);
        optionsContainer.appendChild(optionWrapper);

        optionWrapper.addEventListener('click', () => handleOptionSelect(optionWrapper, input));
      });

      restoreAnswer();
      updateProgress();
      updateButtonVisibility();
    }

    function handleOptionSelect(wrapper, input) {
      const currentQuestion = quizData[currentQuestionIndex];
      if (currentQuestion.type === 'single') {
        document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
        wrapper.classList.add('selected');
        input.checked = true;
      } else {
        wrapper.classList.toggle('selected');
        input.checked = !input.checked;
      }
      saveAnswer();
    }

    function saveAnswer() {
      const currentQuestion = quizData[currentQuestionIndex];
      if (currentQuestion.type === 'single') {
        const selectedOption = document.querySelector(`input[name="q${currentQuestionIndex}"]:checked`);
        userAnswers[currentQuestionIndex] = selectedOption ? selectedOption.value : null;
      } else {
        const selectedOptions = Array.from(document.querySelectorAll(`input[name="q${currentQuestionIndex}"]:checked`))
          .map(cb => cb.value);
        userAnswers[currentQuestionIndex] = selectedOptions.length > 0 ? selectedOptions : null;
      }
    }

    function restoreAnswer() {
      const savedAnswer = userAnswers[currentQuestionIndex];
      if (savedAnswer === null) return;

      const inputs = document.querySelectorAll(`input[name="q${currentQuestionIndex}"]`);
      inputs.forEach(input => {
        if (Array.isArray(savedAnswer)) { // Multiple choice
          if (savedAnswer.includes(input.value)) {
            input.checked = true;
            input.parentElement.classList.add('selected');
          }
        } else { // Single choice
          if (input.value === savedAnswer) {
            input.checked = true;
            input.parentElement.classList.add('selected');
          }
        }
      });
    }

    function updateProgress() {
      progressText.textContent = `Câu ${currentQuestionIndex + 1} trên ${quizData.length}`;
    }

    function updateButtonVisibility() {
      prevBtn.disabled = currentQuestionIndex === 0;
      if (currentQuestionIndex === quizData.length - 1) {
        nextBtn.classList.add('hidden');
        submitBtn.classList.remove('hidden');
      } else {
        nextBtn.classList.remove('hidden');
        submitBtn.classList.add('hidden');
      }
    }

    function showNextQuestion() {
      if (currentQuestionIndex < quizData.length - 1) {
        currentQuestionIndex++;
        loadQuestion();
      }
    }

    function showPrevQuestion() {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion();
      }
    }

    function submitQuiz() {
      quizContainer.classList.add('hidden');
      resultContainer.classList.remove('hidden');
      showResults();
    }

    function showResults() {
      let score = 0;
      const reviewArea = document.getElementById('review-area');
      reviewArea.innerHTML = '';

      quizData.forEach((question, index) => {
        const userAnswer = userAnswers[index];
        let isCorrect = false;

        if (question.type === 'single') {
          if (userAnswer === question.answer) {
            isCorrect = true;
          }
        } else {
          if (userAnswer && userAnswer.length === question.answer.length && userAnswer.every(val => question.answer
              .includes(val))) {
            isCorrect = true;
          }
        }

        if (isCorrect) score++;

        const reviewBlock = document.createElement('div');
        reviewBlock.className =
          `p-4 rounded-lg border ${isCorrect ? 'bg-green-50 border-green-300' : 'bg-red-50 border-red-300'}`;

        let answerHtml = `
                    <p class="font-bold text-slate-800">${index + 1}. ${question.question}</p>
                    <p class="mt-2 text-sm"><b>Bạn chọn:</b> ${userAnswer ? (Array.isArray(userAnswer) ? userAnswer.join(', ') : userAnswer) : 'Chưa trả lời'}</p>
                    <p class="mt-1 text-sm"><b>Đáp án đúng:</b> ${Array.isArray(question.answer) ? question.answer.join(', ') : question.answer}</p>
                `;
        reviewBlock.innerHTML = answerHtml;
        reviewArea.appendChild(reviewBlock);
      });

      const scoreText = document.getElementById('score-text');
      scoreText.textContent = `Bạn đã trả lời đúng ${score} / ${quizData.length} câu!`;
    }

    function restartQuiz() {
      currentQuestionIndex = 0;
      userAnswers.fill(null);
      resultContainer.classList.add('hidden');
      quizContainer.classList.remove('hidden');
      loadQuestion();
    }

    prevBtn.addEventListener('click', showPrevQuestion);
    nextBtn.addEventListener('click', showNextQuestion);
    submitBtn.addEventListener('click', submitQuiz);
    restartBtn.addEventListener('click', restartQuiz);

    // Initial load
    window.onload = loadQuestion;
  </script>
</body>

</html>